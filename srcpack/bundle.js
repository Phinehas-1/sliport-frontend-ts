(()=>{"use strict";class e{constructor(e){this.publisherName=e}getPublisherName(){return this.publisherName}}class t{constructor(e,t,s,r,i,o,n){this.monthOfReporting=e,this.publisherName=t,this.placement=s,this.videoShowing=r,this.hour=i,this.returnVisit=o,this.bibleStudy=n}getMonthOfReporting(){return this.monthOfReporting}getPublisherName(){return this.publisherName}getPlacement(){return this.placement}getVideoShowing(){return this.videoShowing}getHour(){return this.hour}getReturnVisit(){return this.returnVisit}getBibleStudy(){return this.bibleStudy}}class s{constructor(e){if(this.dataStore=e,!this.dataStore.isConnected)throw new Error("Could not connect to the data store.")}addPublisher(t){let s=new e(t["publisher-name"].value);return this.dataStore.savePublisher(s)}getPublishers(){return this.dataStore.getPublishers()}addReport(e){let s=new t(e["month-reporting"].value,e["publisher-name"].value,e.placement.value,e["video-showing"].value,e.hour.value,e["return-visit"].value,e["bible-study"].value);return this.dataStore.saveReport(s)}}class r{constructor(){this.localStorage=window.localStorage,this.publishers_string=this.localStorage.getItem("publishers"),this.publishers=[],this.reports_string=this.localStorage.getItem("reports"),this.reports=[],this.localStorage.getItem("reports")||this.localStorage.setItem("reports",JSON.stringify(this.reports)),this.localStorage.getItem("publishers")||this.localStorage.setItem("publishers",JSON.stringify(this.publishers))}isConnected(){return!0}savePublisher(e){var t;return!!this.isConnected()&&(this.publishers=JSON.parse(null!==(t=this.publishers_string)&&void 0!==t?t:"[]"),this.publishers.push(e),this.localStorage.setItem("publishers",JSON.stringify(this.publishers)),!0)}getPublishers(){var e;return JSON.parse(null!==(e=this.publishers_string)&&void 0!==e?e:"[]")}saveReport(e){var t;return!!this.isConnected()&&(this.reports=JSON.parse(null!==(t=this.reports_string)&&void 0!==t?t:"[]"),this.reports.push(e),this.localStorage.setItem("reports",JSON.stringify(this.reports)),!0)}getReports(){var e;return JSON.parse(null!==(e=this.reports_string)&&void 0!==e?e:"[]")}}class i{constructor(){this.reportForm=document.forms[0]}setUpPublisherFormView(e){this.reportForm.reset();const t=this.reportForm["publisher-name"];e.forEach((e=>{let s=document.createElement("OPTION"),r=document.createTextNode(e.publisherName);t.appendChild(s),s.appendChild(r)}))}}const o=[],n=new s(new r),l=(new i,(e,t,s)=>{e.addEventListener(t,s),o.push(e)});l(document.forms[1],"submit",(e=>{e.preventDefault(),n.addPublisher(document.forms[1])?console.log(`Publisher : ${document.forms[1]["publisher-name"].value} was added.`):console.log("Could not save the publisher.")})),l(document.forms[0],"submit",(e=>{e.preventDefault();let t=new r;new s(t).addReport(document.forms[0])?console.log(`Report for : ${document.forms[0]["publisher-name"].value} was added.`):console.log("Could not save the report.")})),window.addEventListener("DOMContentLoaded",(()=>{console.log("Body loaded"),(new i).setUpPublisherFormView(n.getPublishers())}))})();